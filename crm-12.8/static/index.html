<!doctype html>
<html lang="zh-CN" xml:lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<meta name="renderer" content="webkit"/>
<title>CRM2.0</title>
<script src="../js/init.min.js"></script>
<link rel="stylesheet" href="../css/reset.min.css">
<link rel="stylesheet" href="../css/swiper.min.css">
<link rel="stylesheet" href="../css/main.dev.css">
<script src="../js/jquery.min.js"></script>
<script src="../js/echarts.simple.min.js"></script>
<script src="../js/circle-progress.min.js"></script>
<script src="../js/swiper.min.js"></script>
</head>

<body>
	<div class="crm-wrap">
		<div class="home-page">
			<div class="menu">
				<div class="item">
					<i class="ico a">
						<span class="unread">N+</span>
					</i>
					<span>重要信息</span>
				</div>
				<div class="item">
					<i class="ico b"></i>
					<span>机构任务</span>
				</div>
				<div class="item">
					<i class="ico c"></i>
					<span>机构排名</span>
				</div>
				<div class="item">
					<i class="ico d"></i>
					<span>更多</span>
				</div>
			</div>
			<div class="area apprv">
				<div class="scroller" id="apprvList">
					<div class="item">
						<div class="tt">进入审批</div>
						<div class="txt">主办客户李小龙[608190]名下开的合同[068452231645]</div>
					</div>
					<div class="item">
						<div class="tt">进入审批</div>
						<div class="txt">主办客户朱玲玲[608990]名下开的合同[068956231545]</div>
					</div>
					<div class="item">
						<div class="tt">进入审批</div>
						<div class="txt">主办客户马玉玉[608910]名下开的合同[068452231645]</div>
					</div>
				</div>
			</div>
			<div class="area lineChart">
				<div class="info">
					<div class="comp">
						<span>比上日 (万)</span>
						<span>2017-08-23 12:30</span>
					</div>
					<div class="diff">- 0.21</div>
					<div class="ribbon">NO:22</div>
				</div>
				<div id="diffChart"></div>
				<div class="swiper-wrap">
					<div class="swiper" id="slider">
						<div class="item">
							<div class="row">
								<div class="cell">
									<div class="tt">总贷款 (万)</div>
									<div class="num">36,698,456.00</div>
								</div>
								<div class="cell">
									<div class="tt">比上年 (万)</div>
									<div class="num">+23.21</div>
								</div>
							</div>
						</div>
						<div class="item">
							<div class="row">
								<div class="cell">
									<div class="tt">商业贷款 (万)</div>
									<div class="num">6,698,456.00</div>
								</div>
								<div class="cell">
									<div class="tt">比上年 (万)</div>
									<div class="num">+23.21</div>
								</div>
							</div>
						</div>
						<div class="item">
							<div class="row">
								<div class="cell">
									<div class="tt">住房贷款 (万)</div>
									<div class="num">30,698,456.00</div>
								</div>
								<div class="cell">
									<div class="tt">比上年 (万)</div>
									<div class="num">+23.21</div>
								</div>
							</div>
						</div>
						<div class="item">
							<div class="row">
								<div class="cell">
									<div class="tt">汽车贷款 (万)</div>
									<div class="num">698,456.00</div>
								</div>
								<div class="cell">
									<div class="tt">比上年 (万)</div>
									<div class="num">+23.21</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="area pieChart">
				<div class="tt">机构任务 (全部)</div>
				<div class="row">
					<div class="cell">
						<div class="inner">
							<div class="t">第一营业部存款余额 (万)</div>
							<div class="num">6,289</div>
							<div class="pie" id="pie1">
								<span><b></b>%</span>
							</div>
						</div>
					</div>
					<div class="cell">
						<div class="inner">
							<div class="t">第一营业部存款日均 (万)</div>
							<div class="num">1,230</div>
							<div class="pie" id="pie2">
								<span><b></b>%</span>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="cell">
						<div class="inner">
							<div class="t">第一营业部贷款余额 (万)</div>
							<div class="num">2,089</div>
							<div class="pie" id="pie3">
								<span><b></b>%</span>
							</div>
						</div>
					</div>
					<div class="cell">
						<div class="inner">
							<div class="t">第一营业部贷款日均 (万)</div>
							<div class="num">1,230</div>
							<div class="pie" id="pie4">
								<span><b></b>%</span>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="cell">
						<div class="inner">
							<div class="t">第一营业部理财余额 (万)</div>
							<div class="num">8,221</div>
							<div class="pie" id="pie5">
								<span><b></b>%</span>
							</div>
						</div>
					</div>
					<div class="cell">
						<div class="inner">
							<div class="t">第一营业部理财日均 (万)</div>
							<div class="num">2,210</div>
							<div class="pie" id="pie6">
								<span><b></b>%</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
	$(function () {	

		// 实时滚动播放
		var removeTimer, runTimer;
		var apprvList = document.getElementById('apprvList');
		var refreshList = function () {
			var apprvItem = apprvList.getElementsByClassName('item')[0];
			apprvItem.style.height = 0;
			removeTimer && clearTimeout(removeTimer);
			removeTimer = setTimeout(function () {
				apprvItem.removeAttribute('style');
				apprvList.appendChild(apprvItem);
				clearTimeout(removeTimer);
				runner();
			}, 300)
		}
		var runner = function () {
			runTimer && clearTimeout(runTimer);
			runTimer = setTimeout(function () {
				refreshList();
				runTimer && clearTimeout(runTimer);
			}, 5000)
		}
		runner()

		// 初始化折线图表
		var doc = document.documentElement;
		var $chart = document.getElementById('diffChart');
		$chart.style.height = doc.clientWidth / 2.6 + 'px';
		var diffChart = echarts.init($chart);
		var renderChart = function (data) {
			diffChart.setOption({
				grid: {
					show: true,
					backgroundColor: 'rgba(255, 255, 255, 0)',
					borderWidth: 0,
					left: 30,
					right: 15,
					top: 5,
					bottom: 30
				},
				xAxis: [
					{
						axisLine: {
							onZero: false,
							lineStyle: {
								color: 'rgba(113, 244, 255, 0.1)'
							}
						},
						splitLine: {
							show: true,
							lineStyle: {
								color: 'rgba(113, 244, 255, 0.06)'
							}
						},
						axisTick: {
							show: false
						},
						axisLabel: {
							formatter: '{value} 天',
							textStyle: {
								color: 'rgba(255, 255, 255, 0.6)',
								fontSize: 10
							}
						},
						type: 'category',
						boundaryGap: false,
						data: ['1','2','3','4','5','6','7', '8', '9', '10', '11', '12']
					}
				],
				yAxis: [
					{
						scale: true,
						type: 'value',
						axisLine: {
							lineStyle: {
								color: 'rgba(113, 244, 255, 0.1)'
							}
						},
						splitLine: {
							show: false
						},
						axisTick: {
							show: false
						},
						axisLabel: {
							textStyle: {
								color: 'rgba(255, 255, 255, 0.6)',
								fontSize: 10
							}
						}
					}
				],
				series: [
					{
						smooth: true,
						name:'贷款',
						type:'line',
						showSymbol: false,
						lineStyle:{
							normal: {
								width: 3,
								color: {
									type: 'linear',
									x: 0,
									y: 0,
									x2: 1,
									y2: 0,
									colorStops: [{
										offset: 0,
										color: '#6337ff'
									}, {
										offset: 0.5,
										color: '#3ce39c'
									}, {
										offset: 1,
										color: '#ffdc50'
									}],
									globalCoord: false
								}
							}
						},
						areaStyle: {
							normal: {
								color: {
									type: 'linear',
									x: 0,
									y: 0,
									x2: 0,
									y2: 1,
									colorStops: [{
										offset: 0,
										color: 'rgba(113, 240, 255, 0.5)'
									}, {
										offset: 1,
										color: 'rgba(113, 240, 255, 0)'
									}],
									globalCoord: false
								}
							}
						},
						data: data
					}
				]
			});
		}

		var mockData = [
			[-6, -11, -2, 0, 3, 4, 6, 4, -1, -2, -3, -3],
			[3, 4, 5, 2, -1, -2, -3, -4, -3, 0, 1, 2],
			[0, 1, 3, 5, 4, 3, 2, 1, -1, 0, -2, -3],
			[-6, -11, -2, 0, 3, 4, 6, 4, -1, -2, -3, -3]
		]

		// 初始化轮播
		var slider = document.getElementById('slider');
		var slideTimer;
		var rootSize = doc.clientWidth / 7.5;
		slider.style.height = rootSize * 0.8 + 43 + 'px';
		new Swiper({
			container: slider,
			item: '.item',
			observer: true,
			autoplay: false,
			duration: 500,
			onSwiped: function (i) {
				slideTimer && clearTimeout(slideTimer);
				slideTimer = setTimeout(function () {
					renderChart(mockData[i]);
					clearTimeout(slideTimer);
				}, 100)
			}
		})

		// 初始化圆环
		var setCircle = function (el, val, colors) {
			$(el).circleProgress({
				value: val,
				size: doc.clientWidth / 750 * 150 * 0.8,
				lineCap: 'round',
				fill: {
					gradient: colors
				}
			}).on('circle-animation-progress', function (event, progress, stepValue) {
				$(this).find('span b').text(parseInt(stepValue * 100));
			});
		}
		var colorsPanel = [
			['#2a98ed', '#72ddf8'],
			['#e75a9f', '#e68851'],
			['#ef7699', '#a978ec'],
			['#51e8b1', '#1dddd4']
		]
		setCircle('#pie1', 0.39, colorsPanel[0])
		setCircle('#pie2', 0.52, colorsPanel[1])
		setCircle('#pie3', 0.22, colorsPanel[2])
		setCircle('#pie4', 0.42, colorsPanel[3])
		setCircle('#pie5', 0.88, colorsPanel[0])
		setCircle('#pie6', 0.52, colorsPanel[1])

	})
	</script>
</body>
</html>
