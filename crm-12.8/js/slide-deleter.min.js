"use strict";function slideDeleter(t,e){this.$container=t,this.opt={sliderName:".slide-delete-slider",controlName:".slide-delete-control",fnButtonName:".slide-delete-fn-btn",delButtonName:".slide-delete-del-btn",duration:200,threshold:80,backThreshold:40,range:140,fn:function(){},delete:function(){}};for(var i in e)this.opt[i]=e[i];this.init()}slideDeleter.prototype={init:function(){var t=this;this.resetPoz(),this.$slider=this.$container.querySelector(this.opt.sliderName),this.$control=this.$container.querySelector(this.opt.controlName),this.$fnBtn=this.$control.querySelector(this.opt.fnButtonName),this.$delBtn=this.$control.querySelector(this.opt.delButtonName),this.$container.style.height=this.$slider.offsetHeight+"px",this.$slider.style.cssText="position: absolute; left: 0; top: 0",this.$fnBtn.addEventListener("click",function(e){t.opt.fn(t.$fnBtn,t.$container),t.markTimer&&clearTimeout(t.markTimer),t.markTimer=setTimeout(function(){t.resetSliderAnimate(0,function(){var e=t.$slider.style;e.transition=e["-webkit-transition"]="none",clearTimeout(t.markTimer)}),t.resetPoz()},200),e.stopPropagation()},!1),this.$delBtn.addEventListener("click",function(){t.opt.delete(),t.destroy()},!1),this.bindEvent()},resetPoz:function(){this.startPoz=[0,0],this.movePoz=[0,0],this.endPoz=[0,0],this.distancePoz=[0,0]},bindEvent:function(){var t=this;this.$slider.addEventListener("touchstart",function(e){t.markTimer&&clearTimeout(t.markTimer),t.startPoz[0]=e.changedTouches[0].pageX,t.startPoz[1]=e.changedTouches[0].pageY},!1),this.$slider.addEventListener("touchmove",function(e){t.movePoz[0]=e.changedTouches[0].pageX,t.movePoz[1]=e.changedTouches[0].pageY;var i=-1*t.opt.range,n=t.distancePoz[0]=t.movePoz[0]-t.startPoz[0],s=t.distancePoz[1]=t.movePoz[1]-t.startPoz[1];Math.abs(s)>Math.abs(n)||(!t.isActive&&n<0?(n<i&&(n=i),t.setSliderTranslate(n),e.preventDefault()):t.isActive&&n>0&&(n>t.opt.range&&(n=t.opt.range),t.setSliderTranslate(n-t.opt.range),e.preventDefault()))},!1),this.$slider.addEventListener("touchend",function(e){t.endPoz[0]=e.changedTouches[0].pageX,t.endPoz[1]=e.changedTouches[0].pageY,Math.abs(t.distancePoz[1])>Math.abs(t.distancePoz[0])&&(t.isActive=!1,t.touchendHandle(0)),t.touchendHandle(t.distancePoz[0])},!1)},touchendHandle:function(t){var e=this,i=void 0;this.isActive?t>this.opt.backThreshold?(i=0,this.isActive=!1):(i=-1*this.opt.range,this.isActive=!0):t<-1*this.opt.threshold?(i=-1*this.opt.range,this.isActive=!0):(i=0,this.isActive=!1),this.resetSliderAnimate(i,function(){var t=e.$slider.style;t.transition=t["-webkit-transition"]="none"}),this.resetPoz()},resetSliderAnimate:function(t,e){var i=this.$slider.style,n="translate3d("+t+"px, 0, 0)",s=this.opt.duration+"ms";i["-webkit-transition"]="-webkit-transform "+s,i.transition="transform "+s,i.transform=i["-webkit-transform"]=n,this.$slider.addEventListener("webkitTransitionEnd",function(t){e&&e(),t.preventDefault()},!1)},setSliderTranslate:function(t){var e=this.$slider.style;e["-webkit-transform"]=e.transform="translate3d("+t+"px, 0, 0)"},destroy:function(){this.$container.parentNode.removeChild(this.$container)}};